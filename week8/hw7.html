<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="../class_format.css" />
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>Week 8:  CCIS2630 PHP:  Homework</title>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-77508642-6', 'auto');
      ga('send', 'pageview');

      </script>
</head>
<body>
<h3>Homework 35 points - March 23, 2006</h3>
<h4>Due at the end of next class period</h4>
<p><strong>REQUIRED FOR CREDIT: </strong>Before you start, at the mysql prompt type the following:</p>
<pre>mysql> tee /home/YOURUSERNAME/mySQL_homework7_YOURUSERNAME.txt</pre>
<p>This homework assignment will be changing your existing users information into a database.</p>
<h4>5 points - create a table to replace the file you used to hold the user name and passwords of the users (login.txt) and the file you used to hold user information (users.txt).</h4>  
<p>This table must have a field for each field in the users.txt and login.txt files along with an auto incrementing userID field, however do not duplicate any field names (i.e. username fields from the login.txt and users.txt files do not need to be entered twice). All fields must be a reasonably appropriate data type (char, varchar, date, blob, int, etc...).
<h4>5 points - populate your database</h4>
<p>Insert all the data in your existing files into your new tables. Make sure the passwords are encrypted using the PASSWORD('myPassWord') in your SQL. Consult the mysql online documentation if you have any questions.</p> 
<h4>5 points - Create a table to hold information about the images</h4>
<p>This table must have the following fields:</p>
<ul>
  <li>ImageID (auto incrementing)</li>
  <li>UserID (to reference the users table)</li>
  <li>ImageName</li>
  <li>ImagePath</li>
  <li>ImageType</li>
  <li>ImageSize</li>
</ul>
<h4>Email the "/home/YOURUSERNAME/mySQL_homework7_YOURUSERNAME.txt" to me</h4>
<h4>10 points</h4>
<p>Update your registration script to interface with your mySQL database rather than a file. This includes doing the following:</p>
<ul>
  <li>If the registration is valid, insert a new row into your users table.</li>
  <li>Make sure the password is encrypted with the PASSWORD() command.</li>
</ul>
<h4>5 points: Update your login script.</h4>
<p>Update the script function / script you use to log a use in. This must do the following:</p>
<ul>
  <li>When the user enters their password, it must check the database for a vaid username / password combination.</li>
  <li>If the user name / password combination is valid, set the session variable.</li>
  <li>If the user name / password combination is valid, update the "lastLoggedIn" field in your table.</li>
</ul>
<h4>5 points: Update the image upload page.</h4>
<p>Update your upload script to work with your mySQL database. This should include the following:</p>
<ul>
  <li>If all the checks are valid (file size, total images, file type) insert a new entry into your images table.</li>
  <li>Change the display listing to be populated from a mySQL query.</li>
</ul>
<h4>Hints:</h4>
<p>It may be advantageous to create a function to handle your database interactions. Perhaps one for selecting data and another for inserting, updating and deleting data.</p>
<p>Questions or problems, feel free to email me at: REDACTED. Make sure you include your code. That will help me better answer and address any problems.</p>
<h4>Extra Credit</h4>
<strong>2 points:</strong> Modify your SQL query for parts 1 and 2 to have the lastLoggedIn field contain the current time on the database server without using the date() command.
<br />
<strong>1 point:</strong> Once a user is logged in, show the total number of registered users on the system in the same area on the page where the "You are logged in" message is.
</body>
</html>
</body>
</html>
